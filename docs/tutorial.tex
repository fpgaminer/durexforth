\chapter{Tutorial}

\section{Interpreter}

Start up durexForth. If loaded successfully, it will greet you with a friendly \texttt{ok}. You have landed in the interpreter!

Let's warm it up a little. Enter \texttt{1} (followed by return). You have now put a digit on the stack. This can be verified by the command \texttt{.s}, which will print out the stack. Now enter \texttt{.} to pop the digit and print it to screen, followed by \texttt{.s} to verify that the stack is empty.

Now some arithmetics. \texttt{1000 a * .} will calculate $\$a \times \$1000$ and print the result on the screen. \texttt{6502 100 / 1- .} will calculate and print $(\$6502 / \$100) - 1$.

Let's define a word \texttt{bg} for setting the border color... 

\begin{verbatim}
: bg d020 c! ;
\end{verbatim}

\texttt{0 bg}, \texttt{1 bg} and so on will let you set border color. Cool! Now let's head on to making our first "real" program...

\section{Editor}

The editor (fully described in chapter \ref{editor}) is convenient for editing larger pieces of code. With it, you keep an entire source file loaded in RAM, and you can recompile and test it easily.

Start the editor by typing \texttt{s" foo" edit}. It will try to open the (non-existant) file ``foo.'' After a little while you will be presented to a nice pink screen.

To enter text, first press \texttt{i} to enter insert mode. This mode allows you to insert text into the buffer. You can see that it's active on the \texttt{I} that appears in the lower left corner.

This is a good start for making a program. Let's continue where we ended last section, and make a border flasher. Enter:

\begin{verbatim}
forget bg
\end{verbatim}

...and press $\leftarrow$ to leave insert mode. This line forgets the \texttt{bg} word that you defined in the last section, and everything defined after it. Let's try out if it works. First, quit the editor by pressing \texttt{:q}. You should now be back in the interpreter screen. Verify that the word \texttt{bg} still exists by  entering \texttt{0 bg}, \texttt{1 bg} like you did before. Then, jump back to the editor using the command \texttt{fg} (foreground). You should return to your edit buffer with the lonely \texttt{forget bg} line.

Now, compile and run the buffer by pressing \texttt{F7}. You will be thrown out to the interpreter again. Entering \texttt{bg} should now give you the error \colorbox{yellow}{\texttt{bg?}}. Success - we have forgotten the \texttt{bg} word. Now, get back into the editor with \texttt{fg} again.

Under \texttt{forget bg}, add the following lines:

\begin{verbatim}
: flash d020 c@ 1+ d020 c! recurse ;
flash
\end{verbatim}

\texttt{flash} will cycle the border color infinitely. Before trying it out, go up and change \texttt{forget bg} to \texttt{forget flash}. This makes sure you won't run out of RAM, no matter how many times you recompile the program. Now press \texttt{F7} to compile and run. If everything is entered right, you will be facing a wonderful color cycle.

To stop the program, press \texttt{RESTORE} to get to the interpreter. Then enter \texttt{fg} to get back into the editor. Let's see how we can factor the program to get something more Forth'y:

\begin{verbatim}
forget bg
: bg d020 ; ( -- addr ) # border color addr
: inc dup c@ 1+ swap c! ; ( addr -- ) # inc addr by 1
: flash dup inc recurse ; ( addr -- ) # inc addr forever
bg flash
\end{verbatim}

Of course, it is a matter of taste which version you prefer. Press \texttt{F7} to see if the new version runs faster or slower.